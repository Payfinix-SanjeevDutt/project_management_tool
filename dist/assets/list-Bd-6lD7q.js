import{_ as P,a as R,j as e,J as A,K as x,S as b,A as L,y as N,L as _,a2 as E,I as i,C as T,M as F,c as d,H as I,r as m,b0 as H,b1 as M,b2 as O,bd as U,al as V,a1 as z,Q as K,aj as G,ai as S,a$ as W,W as w,N as $,f as J,B as Q,i as q,E as X,F as Y,a7 as Z,a8 as ee,be as se,P as oe,e as ae}from"./index-BXVaN-Bg.js";import{a as te}from"./utils-crRmHoXN.js";import{C as le}from"./custom-breadcrumbs-DVNouI9r.js";import{u as ne,g as re,e as ie,T as ce}from"./table-pagination-custom-DELtcPLa.js";import{T as de}from"./table-no-data-DLCp78j2.js";import{T as pe}from"./table-empty-rows-DU8s3bMi.js";import{T as he}from"./table-head-custom-CNktS7mP.js";import{C as me}from"./confirm-dialog-DwBTbcqe.js";import{C as D}from"./Checkbox-DIz0V3dn.js";import{A as xe}from"./add-employee-modal-BSZXgvjn.js";import{F as ue,a as k,c as v}from"./filters-result-DCGeM_5H.js";import{C as y}from"./DialogContent-CxPgUekA.js";import"./Breadcrumbs-DjhM_bul.js";import"./FormControlLabel-BRFnA9-2.js";import"./DialogTitle-BTq9gtTJ.js";import"./Autocomplete-DxNy6pfN.js";import"./LoadingButton-L3kQ20Ll.js";import"./CircularProgress-DeAomXPU.js";function je({row:s,selected:a,onEditRow:n,onSelectRow:r,onDeleteRow:p}){const c=P(),o=R();return e.jsxs(e.Fragment,{children:[e.jsxs(A,{hover:!0,selected:a,"aria-checked":a,tabIndex:-1,children:[e.jsx(x,{padding:"checkbox",children:e.jsx(D,{id:s.id,checked:a,onClick:r})}),e.jsx(x,{children:e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(L,{alt:s.name,src:s.avatarUrl}),e.jsx(b,{sx:{typography:"body2",flex:"1 1 auto",alignItems:"flex-start"},children:e.jsx(N,{color:"inherit",onClick:n,sx:{cursor:"pointer"},children:s.name})})]})}),e.jsx(x,{sx:{whiteSpace:"nowrap"},children:s.email}),e.jsx(x,{sx:{whiteSpace:"nowrap"},children:s.mobile||"---"}),e.jsx(x,{sx:{whiteSpace:"nowrap"},children:s.role}),e.jsx(x,{children:e.jsx(_,{variant:"soft",color:s.status==="active"&&"success"||s.status==="pending"&&"warning"||s.status==="complete"&&"error"||"default",children:s.verification||"----"})}),e.jsx(x,{sx:{alignItems:"right"},children:e.jsx(E,{color:o.open?"inherit":"default",onClick:o.onOpen,children:e.jsx(i,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(T,{open:o.open,anchorEl:o.anchorEl,onClose:o.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(F,{children:[e.jsxs(d,{onClick:()=>{c.onTrue(),o.onClose()},sx:{color:"error.main"},children:[e.jsx(i,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(d,{onClick:()=>{},children:[e.jsx(i,{icon:"cib:open-access"}),"suspend access"]}),e.jsxs(d,{onClick:()=>{},children:[e.jsx(i,{icon:"charm:circle-tick"}),"grant access"]}),e.jsxs(d,{onClick:()=>{},children:[e.jsx(i,{icon:"mdi:email-resend"}),"resend invite"]}),e.jsxs(d,{onClick:()=>{},children:[e.jsx(i,{icon:"lets-icons:view-fill"}),"view details"]}),e.jsxs(d,{onClick:()=>{n(),o.onClose()},children:[e.jsx(i,{icon:"solar:pen-bold"}),"Edit"]})]})}),e.jsx(me,{open:c.value,onClose:c.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(I,{variant:"contained",color:"error",onClick:()=>{p(),c.onFalse()},children:"Delete"})})]})}function be({filters:s,options:a,onResetPage:n}){const r=R(),p=m.useCallback(o=>{n(),s.setState({name:o.target.value})},[s,n]),c=m.useCallback(o=>{const l=typeof o.target.value=="string"?o.target.value.split(","):o.target.value;n(),s.setState({role:l})},[s,n]);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsxs(H,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(M,{htmlFor:"user-filter-role-select-label",children:"Role"}),e.jsx(O,{multiple:!0,value:s.state.role,onChange:c,input:e.jsx(U,{label:"Role"}),renderValue:o=>o.map(l=>l).join(", "),inputProps:{id:"user-filter-role-select-label"},MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:a.roles.map(o=>e.jsxs(d,{value:o,children:[e.jsx(D,{disableRipple:!0,size:"small",checked:s.state.role.includes(o)}),o]},o))})]}),e.jsxs(b,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(V,{fullWidth:!0,value:s.state.name,onChange:p,placeholder:"Search...",InputProps:{startAdornment:e.jsx(z,{position:"start",children:e.jsx(i,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(E,{onClick:r.onOpen,children:e.jsx(i,{icon:"eva:more-vertical-fill"})})]})]}),e.jsx(T,{open:r.open,anchorEl:r.anchorEl,onClose:r.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(F,{children:[e.jsxs(d,{onClick:()=>{r.onClose()},children:[e.jsx(i,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(d,{onClick:()=>{r.onClose()},children:[e.jsx(i,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(d,{onClick:()=>{r.onClose()},children:[e.jsx(i,{icon:"solar:export-bold"}),"Export"]})]})})]})}function ge({filters:s,onResetPage:a,totalResults:n,sx:r}){const p=m.useCallback(()=>{a(),s.setState({name:""})},[s,a]),c=m.useCallback(()=>{a(),s.setState({status:"all"})},[s,a]),o=m.useCallback(h=>{const g=s.state.role.filter(C=>C!==h);a(),s.setState({role:g})},[s,a]),l=m.useCallback(()=>{a(),s.onResetState()},[s,a]);return e.jsxs(ue,{totalResults:n,onReset:l,sx:r,children:[e.jsx(k,{label:"Status:",isShow:s.state.status!=="all",children:e.jsx(y,{...v,label:s.state.status,onDelete:c,sx:{textTransform:"capitalize"}})}),e.jsx(k,{label:"Role:",isShow:!!s.state.role.length,children:s.state.role.map(h=>m.createElement(y,{...v,key:h,label:h,onDelete:()=>o(h)}))}),e.jsx(k,{label:"Keyword:",isShow:!!s.state.name,children:e.jsx(y,{...v,label:s.state.name,onDelete:p})})]})}const Ce=[{id:"name",label:"Name",width:200},{id:"email",label:"Email",width:250},{id:"mobile",label:"Phone Number",width:200},{id:"role",label:"Role",width:180},{id:"verification",label:"Verification",width:200},{id:"options",label:"",width:20}],we=["admin","reporter","assignee"];function ke(){const s=ne(),a=K(),n=P(),r=G(),{employees:p}=S(t=>t.assignee),c=S(t=>t.projects.currentProjectId),o=W({name:"",role:[],status:"all"}),l=te({inputData:Object.values(p),comparator:re(s.order,s.orderBy),filters:o.state}),h=!!o.state.name||o.state.role.length>0||o.state.status!=="all",g=!l.length&&h||!l.length,C=m.useCallback(t=>{a.push(w.dashboard.user.edit(t))},[a]),B=async t=>{try{const u=await Z.post(ee.project.project_user_delete,{project_id:c,employee_id:t});if(u.status===200){const j={...p};delete j[t],r(se(j))}else{const j=await u.json();console.error("Failed to delete employee:",j.message)}}catch(u){console.error("Error deleting employee:",u)}};return e.jsxs($,{children:[e.jsx(le,{heading:"Employee List",links:[{name:"Dashboard",href:w.dashboard.root},{name:"Employees",href:w.dashboard.employees.root},{name:"List"}],action:e.jsx(I,{onClick:n.onTrue,variant:"contained",startIcon:e.jsx(i,{icon:"mingcute:add-line"}),children:"New Employee"}),sx:{mb:{xs:3,md:5}}}),e.jsx(xe,{open:n.value,handleClose:n.onFalse}),e.jsxs(J,{children:[e.jsx(be,{filters:o,onResetPage:s.onResetPage,options:{roles:we}}),h&&e.jsx(ge,{filters:o,totalResults:l.length,onResetPage:s.onResetPage,sx:{p:2.5,pt:0}}),e.jsx(Q,{sx:{position:"relative"},children:e.jsx(q,{children:e.jsxs(X,{size:s.dense?"small":"medium",children:[e.jsx(he,{order:s.order,orderBy:s.orderBy,headLabel:Ce,rowCount:l.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:t=>s.onSelectAllRows(t,l.map(u=>u.id))}),e.jsxs(Y,{children:[l.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(t=>e.jsx(je,{row:t,selected:s.selected.includes(t.id),onSelectRow:()=>s.onSelectRow(t.id),onDeleteRow:()=>B(t.id),onEditRow:()=>C(t.id)},t.id)),e.jsx(pe,{height:s.dense?56:76,emptyRows:ie(s.page,s.rowsPerPage,l.length)}),e.jsx(de,{notFound:g})]})]})})}),e.jsx(ce,{page:s.page,dense:s.dense,count:l.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})]})}const f={title:`User list | Dashboard - ${ae.site.name}`};function Oe(){return e.jsxs(e.Fragment,{children:[e.jsxs(oe,{children:[e.jsxs("title",{children:[" ",f.title]}),e.jsx("meta",{name:"description",content:f.description})]}),e.jsx(ke,{})]})}export{Oe as default};
