import{r as s,_ as ae,ah as R,j as e,aF as $e,k as C,B as f,al as I,b0 as Ve,b1 as Ge,b2 as Ke,c as k,H as W,a7 as se,a8 as ne,an as z,aU as dt,a as kt,J as pe,K as _,a2 as ce,I as M,C as qe,M as ct,S as E,a1 as ht,aa as ut,a9 as xt,E as pt,ac as mt,F as gt,i as jt,f as ft,aH as St,T as Oe,aV as Ye,A as ze,aY as Ue,x as ue,L as xe,aE as nt,aR as bt,G as yt,aj as Dt,ai as Je,aI as wt,aJ as It,aK as Tt,aL as Et,aM as _t,aO as Rt,ad as At,aS as Le,N as Mt,ae as Wt,b3 as Pt,P as Ft}from"./index-BXVaN-Bg.js";import{C as Nt}from"./custom-breadcrumbs-DVNouI9r.js";import{u as Re,M as be,C as _e,a as Ot,F as Yt}from"./fields-CtJmr7vf.js";import{D as Qe}from"./DialogTitle-BTq9gtTJ.js";import{D as Xe,a as Ze,C as Ut}from"./DialogContent-CxPgUekA.js";import{G as fe}from"./Grid-DMxD-6Mk.js";import{L as Se}from"./LoadingButton-L3kQ20Ll.js";import"./image-DGI4zpN2.js";import{C as Lt}from"./confirm-dialog-DwBTbcqe.js";import{L as He,v as Ht}from"./DatePicker-01LY8aSd.js";import{C as Be}from"./Checkbox-DIz0V3dn.js";import{C as zt}from"./ClickAwayListener-_j_WpWlF.js";import{C as Bt}from"./CircularProgress-DeAomXPU.js";import"./Breadcrumbs-DjhM_bul.js";import"./date-time-utils-CU9-YODR.js";import"./createStyled-mUU3E4G-.js";import"./FormControlLabel-BRFnA9-2.js";import"./utils-crRmHoXN.js";import"./Autocomplete-DxNy6pfN.js";import"./gridClasses-JFmvzewp.js";import"./format-number-DrEElRjc.js";function $t({open:h,onClose:u,items:l,setOpen:d,getSprints:g,sprintData:x,setBool:n}){const t=x.find(a=>a.sprintId===l),[r,p]=s.useState("Custom"),[i,c]=s.useState(),[S,v]=s.useState(),[F,D]=s.useState(),[T,L]=s.useState(!1);Re();const[P,q]=s.useState(!1),[N,X]=s.useState((t==null?void 0:t.description)||""),$=ae();console.log("currentSprint>>",t),s.useEffect(()=>{t&&(D(t.sprintName||""),c(R(t.startDate)||null),v(R(t.endDate)||null))},[t]);const Z=a=>{if(q(!0),c(a),r!=="Custom"){const b=parseInt(r.replace("week",""),10),w=R(a).add(b,"week");v(w)}O(a,S)},J=a=>{const b=a.target.value;if(p(b),i&&b!=="Custom"){const w=parseInt(b.replace("week",""),10),G=R(i).add(w,"week");v(G)}},B=a=>{v(a),O(i,a)},O=(a,b)=>{a&&b&&R(b).isBefore(R(a))?L(!0):L(!1)},m=async()=>{const a={sprint_id:t==null?void 0:t.sprintId,name:F,description:N,start_date:i==null?void 0:i.format("YYYY-MM-DD HH:mm:ss"),end_date:S==null?void 0:S.format("YYYY-MM-DD HH:mm:ss")};try{$.onTrue();const b=await se.put(ne.sprints.update,a),{message:w,errors:G,status:ee}=b.data;ee===!0?(z.success("Sprint updated successfully!"),g()):z.error(w)}catch(b){console.error(b),z.error("Unable to process")}finally{$.onFalse()}n(!1)};return e.jsxs($e,{fullWidth:!0,maxWidth:!1,open:h,onClose:u,PaperProps:{sx:{maxWidth:550}},children:[e.jsxs(Qe,{id:"alert-dialog-title",variant:"bold",fontSize:20,children:["Edit: ",(t==null?void 0:t.sprintName)||"Sprint"]}),e.jsxs(Xe,{children:[e.jsx(C,{variant:"subtitle2",sx:{mb:3},children:"Required fields are marked with an asterisk"}),e.jsx(fe,{container:!0,spacing:2,children:e.jsxs(f,{component:"form",sx:{display:"flex",flexDirection:"column",gap:3,width:"100%",p:3,overflow:"hidden",boxSizing:"border-box"},children:[e.jsx(I,{required:!0,id:"sprint-name",label:"Sprint Name",variant:"outlined",value:F,onChange:a=>D(a.target.value)}),e.jsxs(Ve,{sx:{width:"100%"},children:[e.jsx(Ge,{id:"duration-select-label",children:"Duration"}),e.jsxs(Ke,{labelId:"duration-select-label",id:"duration-select",label:"Duration",variant:"outlined",value:r,onChange:J,children:[e.jsx(k,{value:"week1",children:"1 Week"}),e.jsx(k,{value:"week2",children:"2 Weeks"}),e.jsx(k,{value:"week3",children:"3 Weeks"}),e.jsx(k,{value:"week4",children:"4 Weeks"}),e.jsx(k,{value:"Custom",children:"Custom"})]})]}),e.jsx(be,{value:i,onChange:Z,label:"Start Date",format:"DD/MM/YY hh:mm A",slotProps:{textField:{fullWidth:!0,error:P&&!i}}}),e.jsx(be,{value:S,onChange:B,label:"End Date",format:"DD/MM/YY hh:mm A",slotProps:{textField:{fullWidth:!0,error:T,helperText:T?"End date must be later than start date":""}},disabled:r!=="Custom"}),e.jsx(I,{name:"subDescription",label:"Other Details",multiline:!0,rows:4,value:N,onChange:a=>X(a.target.value),sx:{width:"100%"}})]})})]}),e.jsxs(Ze,{children:[e.jsx(W,{variant:"outlined",onClick:u,children:"Cancel"}),e.jsx(Se,{type:"submit",loading:$.value,variant:"contained",disabled:T,onClick:m,children:"Save"})]})]})}function Vt({open:h,onClose:u,items:l,startDateTime:d,setStartDateTime:g,endDateTime:x,setEndDateTime:n,setOpen:t,sprintid:r,setCurrentSprintId:p,getSprints:i}){const[c,S]=s.useState("Custom"),[v,F]=s.useState(!1);s.useState("");const{control:D,setValue:T}=Re(),L=ae(),[P,q]=s.useState(!1);console.log("startDateTime",d),console.log("open",h);const N=m=>{const a=m.target.value;if(S(a),a.startsWith("week")){const b=parseInt(a.replace("week",""),10);if(d){const w=R(d).add(b,"week").toDate();n(w)}}else a==="Custom"&&n(null)},X=m=>{q(!0),g(m),T("start",m),B(m,x)},$=m=>{n(m),T("end",m),B(d,m)},Z=d?d.format("DD-MM-YY hh:mm A"):"",J=x?x.format("DD-MM-YY hh:mm A"):"",B=(m,a)=>{m&&a&&R(a).isBefore(R(m))?F(!0):F(!1)},O=async()=>{const m={sprint_id:r,start_date:Z,end_date:J};try{L.onTrue();const a=await se.put(ne.sprints.addDate,m);console.log("response???",a);const{message:b,errors:w,data:G,status:ee}=a.data;ee===!0?(u(G),p(null),z.success(b),i()):z.error(b)}catch(a){console.error(a),z.error("Unable to process")}finally{L.onFalse()}t(!1)};return e.jsxs($e,{fullWidth:!0,maxWidth:!1,open:h,onClose:u,PaperProps:{sx:{maxWidth:550}},children:[e.jsxs(Qe,{id:"alert-dialog-title",children:["Edit sprint:",l]}),e.jsxs(Xe,{children:[e.jsx(C,{variant:"subtitle2",sx:{mb:3},children:"Required fields are marked with an asterisk"}),e.jsx(fe,{container:!0,spacing:2,children:e.jsxs(f,{component:"form",sx:{display:"flex",flexDirection:"column",gap:3,width:"100%",p:3,overflow:"hidden",boxSizing:"border-box"},children:[e.jsx(I,{required:!0,id:"outlined-required",label:"Sprints",variant:"outlined",defaultValue:l}),e.jsxs(Ve,{sx:{width:"100%"},children:[e.jsx(Ge,{id:"platform-type-select-label",children:"Duration"}),e.jsxs(Ke,{labelId:"platform-type-select-label",id:"device-select",label:"Duration",variant:"outlined",value:c,onChange:N,children:[e.jsx(k,{value:"week1",children:"1 Week"}),e.jsx(k,{value:"week2",children:"2 Week"}),e.jsx(k,{value:"week3",children:"3 Week"}),e.jsx(k,{value:"week4",children:"4 Week"}),e.jsx(k,{value:"Custom",children:"Custom"})]})]}),e.jsx(_e,{name:"start",control:D,render:({field:m})=>e.jsx(be,{...m,value:R(d),onChange:X,label:"Start Date",format:"DD/MM/YY hh:mm A",slotProps:{textField:{fullWidth:!0,error:P&&!d}}})}),e.jsx(_e,{name:"end",control:D,render:({field:m})=>e.jsx(be,{...m,value:R(x),onChange:$,label:"End Date",format:"DD/MM/YY hh:mm A",slotProps:{textField:{fullWidth:!0,error:v,helperText:v&&"End date must be later than start date"}},disabled:c!=="Custom"})}),e.jsx(I,{name:"subDescription",label:"Other Details",multiline:!0,rows:4,sx:{width:"100%"}})]})})]}),e.jsxs(Ze,{children:[e.jsx(W,{variant:"outlined",onClick:u,children:"Cancel"}),e.jsx(Se,{type:"submit",loading:L.value,variant:"contained",onClick:O,children:"Update"})]})]})}const at=dt(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),rt=dt(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function Gt({issue:h}){const{id:u,title:l,status1:d}=h,g=ae(),x=kt();return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{children:[e.jsx(_,{sx:{p:0},align:"left",children:e.jsx(W,{href:`#${u}`,variant:"text",sx:{textTransform:"none"},children:u})}),e.jsx(_,{sx:{p:0},align:"center",children:l}),e.jsx(_,{sx:{p:0},align:"center",children:e.jsx(Ut,{label:d,sx:{bgcolor:(()=>{switch(d){case"todo":return"gray";case"inprogress":return"info.main";case"done":return"success.main";default:return"gray"}})(),color:"white"}})}),e.jsx(_,{sx:{p:0},align:"right",children:e.jsx(ce,{color:x.open?"inherit":"default",onClick:x.onOpen,children:e.jsx(M,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(qe,{open:x.open,anchorEl:x.anchorEl,onClose:x.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(ct,{children:[e.jsxs(k,{onClick:()=>{g.onTrue(),x.onClose()},sx:{color:"error.main"},children:[e.jsx(M,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(k,{onClick:()=>{},children:[e.jsx(M,{icon:"solar:pen-bold"}),"Edit"]})]})}),e.jsx(Lt,{open:g.value,onClose:g.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(W,{variant:"contained",color:"error",onClick:()=>{},children:"Delete"})})]})}const Kt=[{id:"Id",label:"Id",align:"left"},{id:"Name",label:"Name",align:"center"},{id:"Status",label:"Status",align:"center"},{id:"",label:"",align:"right"}];function qt(){const[h,u]=s.useState(""),[l,d]=s.useState([]),g=s.useMemo(()=>{const n=l.length;if(n===0)return{todo:0,inProgress:0,done:0};const t=l.filter(i=>i.status1==="TO DO").length,r=l.filter(i=>i.status1==="IN PROGRESS").length,p=l.filter(i=>i.status1==="DONE").length;return{todo:t/n*100,inProgress:r/n*100,done:p/n*100}},[l]),x=()=>{h.trim()&&(d([...l,{id:`T1S-${l.length+1}`,title:h,status1:"TO DO"}]),u(""))};return e.jsxs(E,{direction:"column",gap:2,children:[e.jsx(C,{variant:"subtitle2",children:"Child Issues"}),e.jsxs(f,{sx:{border:"1px solid #e0e0e0",borderRadius:1,p:2},children:[e.jsx(C,{variant:"subtitle2",children:"Progress"}),e.jsxs(f,{sx:{display:"flex",width:"100%",height:10,backgroundColor:"#ddd",borderRadius:1,overflow:"hidden",my:2},children:[e.jsx(f,{sx:{width:`${g.done}%`,backgroundColor:"primary.light",borderRadius:g.done>0?"5px 0 0 5px":"5px"}}),e.jsx(f,{sx:{width:`${g.inProgress}%`,backgroundColor:"info.light"}}),e.jsx(f,{sx:{width:`${g.todo}%`,backgroundColor:"warning.light",borderRadius:g.todo>0&&g.inProgress===0?"0 5px 5px 0":"0"}})]}),e.jsx(I,{value:h,onChange:n=>u(n.target.value),placeholder:"Add child issue",fullWidth:!0,InputProps:{endAdornment:e.jsx(ht,{position:"end",children:e.jsx(W,{variant:"contained",onClick:x,children:"Add"})})}}),e.jsx(ut,{component:xt,sx:{mt:2},children:e.jsxs(pt,{children:[e.jsx(mt,{children:e.jsx(pe,{children:Kt.map(n=>e.jsx(_,{align:n.align,children:n.label},n.id))})}),e.jsx(gt,{children:l.length>0?l.map((n,t)=>e.jsx(Gt,{issue:n},t)):e.jsx(pe,{children:e.jsx(_,{colSpan:4,align:"center",children:"No child issues added yet."})})})]})})]})]})}const Jt=({summary:h,onAttachFile:u,toggleChildIssueView:l})=>e.jsxs(E,{gap:2,children:[e.jsx(C,{variant:"subtitle1",children:h}),e.jsxs(E,{direction:"row",gap:2,children:[e.jsx(W,{variant:"outlined",onClick:u,startIcon:e.jsx(M,{icon:"tdesign:attach"}),children:e.jsx(C,{variant:"body2",children:"Attach"})}),e.jsx(W,{variant:"outlined",startIcon:e.jsx(M,{icon:"tabler:subtask"}),onClick:l,children:e.jsx(C,{variant:"body2",children:"Add Child Issue"})}),e.jsx(W,{variant:"outlined",startIcon:e.jsx(M,{icon:"line-md:link"}),children:e.jsx(C,{variant:"body2",children:"Link Issue"})})]})]}),Qt=({description:h,setDescription:u,updateHistory:l})=>{const[d,g]=s.useState(h),[x,n]=s.useState(!0);s.useEffect(()=>{g(h)},[h]);const t=v=>{g(v)},r=v=>new DOMParser().parseFromString(v,"text/html").body.textContent||"",p=()=>{const v=r(d);u(v),l("Description updated"),n(!1)},i=()=>{g(h),n(!1)},c=()=>{n(!0)},S=Re();return e.jsx(Ot,{...S,children:e.jsxs(f,{mt:3,children:[e.jsx(C,{variant:"h6",children:"Description"}),e.jsxs(E,{sx:{mt:2},children:[x?e.jsx(Yt.Editor,{name:"description",value:d,onChange:t,sx:{maxHeight:440,width:860}}):e.jsx(I,{value:d,onClick:c,variant:"outlined",fullWidth:!0,multiline:!0,InputProps:{readOnly:!0},sx:{cursor:"pointer",maxHeight:480,width:860}}),x&&e.jsxs(f,{mt:2,children:[e.jsx(W,{onClick:p,variant:"contained",color:"primary",sx:{mr:2},children:"Save"}),e.jsx(W,{onClick:i,variant:"outlined",children:"Cancel"})]})]})]})})},Xt=({comments:h,history:u,newComment:l,setNewComment:d,addComment:g,handleDeleteComment:x,handleEditComment:n})=>{const[t,r]=s.useState("comments"),p=(i,c)=>{r(c)};return e.jsxs(E,{gap:2,children:[e.jsx(C,{variant:"h6",children:"Activity"}),e.jsxs(f,{sx:{border:"1px solid #e0e0e0",borderRadius:2,boxShadow:1,p:2,backgroundColor:"#ffffff",width:860},children:[e.jsxs(St,{value:t,onChange:p,"aria-label":"activity-tabs",sx:{borderBottom:"1px solid #e0e0e0"},children:[e.jsx(Oe,{label:"Comments",value:"comments"}),e.jsx(Oe,{label:"History",value:"history"}),e.jsx(Oe,{label:"All",value:"all"})]}),t==="comments"&&e.jsxs(e.Fragment,{children:[e.jsx(Ye,{sx:{maxHeight:200,overflowY:"auto",mb:2},children:h.map((i,c)=>e.jsxs(He,{alignItems:"flex-start",children:[e.jsx(ze,{sx:{mr:2},children:i.author[0]}),e.jsx(Ue,{primary:e.jsx(f,{sx:{backgroundColor:"#f5f5f5",borderRadius:1,padding:1},children:e.jsxs(E,{spacing:.5,children:[e.jsxs(f,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(C,{variant:"body1",sx:{fontWeight:500},children:i.author}),e.jsx(C,{variant:"body2",color:"text.secondary",children:i.time})]}),e.jsx(f,{display:"flex",flexDirection:"column",children:i.text.split(`
`).length>1?e.jsxs(f,{display:"flex",alignItems:"flex-start",children:[" ",e.jsx(f,{display:"flex",flexDirection:"column",flexGrow:1,children:e.jsx(C,{variant:"body2",color:"text.primary",children:i.text})}),e.jsxs(f,{display:"flex",justifyContent:"flex-start",alignItems:"center",ml:1,children:[e.jsx(ue,{title:"Edit",children:e.jsx(ce,{size:"small",onClick:()=>n(c),sx:{mr:1},children:e.jsx(at,{fontSize:"small"})})}),e.jsx(ue,{title:"Delete",children:e.jsx(ce,{size:"small",onClick:()=>x(c),children:e.jsx(rt,{fontSize:"small"})})})]})]}):e.jsxs(f,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(C,{variant:"body2",color:"text.primary",children:i.text}),e.jsxs(f,{display:"flex",justifyContent:"flex-end",alignItems:"center",children:[e.jsx(ue,{title:"Edit",children:e.jsx(ce,{size:"small",onClick:()=>n(c),sx:{mr:1},children:e.jsx(at,{fontSize:"small"})})}),e.jsx(ue,{title:"Delete",children:e.jsx(ce,{size:"small",onClick:()=>x(c),children:e.jsx(rt,{fontSize:"small"})})})]})]})})]})})})]},c))}),e.jsx(I,{value:l,onChange:i=>d(i.target.value),fullWidth:!0,placeholder:"Add a comment...",variant:"outlined",InputProps:{endAdornment:e.jsx(ht,{position:"end",children:e.jsx(W,{variant:"contained",onClick:g,sx:{borderRadius:1,textTransform:"capitalize",height:"40px",minWidth:"120px",padding:"0 16px",fontSize:"0.875rem"},children:"Add Comment"})})},sx:{mb:1,borderRadius:1,"& .MuiOutlinedInput-root":{borderRadius:1}}})]}),t==="history"&&e.jsx(Ye,{sx:{maxHeight:300,overflowY:"auto"},children:u.map((i,c)=>e.jsx(He,{alignItems:"flex-start",children:e.jsx(Ue,{primary:e.jsx(C,{variant:"body1",sx:{fontWeight:500},children:i.change}),secondary:e.jsx(C,{component:"span",variant:"body2",color:"text.secondary",children:i.time})})},c))}),t==="all"&&e.jsx(Ye,{sx:{maxHeight:300,overflowY:"auto"},children:u.map((i,c)=>e.jsx(He,{alignItems:"flex-start",children:e.jsx(Ue,{primary:e.jsx(C,{variant:"body1",sx:{fontWeight:500},children:i.change}),secondary:e.jsx(C,{component:"span",variant:"body2",color:"text.secondary",children:i.time})})},c))})]})]})},Zt=({status:h,assignee:u,setAssignee:l,reporter:d,handleStatusChange:g,setReporter:x})=>e.jsx(f,{children:e.jsx(jt,{sx:{height:"590px"},children:e.jsxs(E,{gap:2,width:275,children:[e.jsx(f,{sx:{display:"flex",justifyContent:"space-between",mt:1,alignItems:"center"},children:e.jsxs(I,{select:!0,label:"Status",value:h,onChange:g,fullWidth:!0,children:[e.jsx(k,{value:"todo",children:"To Do"}),e.jsx(k,{value:"In Progress",children:"In Progress"}),e.jsx(k,{value:"Done",children:"Done"})]})}),e.jsx(C,{variant:"subtitle1",children:"Details"}),e.jsxs(I,{select:!0,fullWidth:!0,label:"Assignee",value:u,onChange:n=>l(n.target.value),children:[e.jsx(k,{value:"Unassigned",children:"Unassigned"}),e.jsx(k,{value:u,children:u})]}),e.jsx(I,{placeholder:"Add parent...",variant:"outlined",fullWidth:!0,children:"None"}),e.jsx(I,{placeholder:"Start date",variant:"outlined",fullWidth:!0}),e.jsx(I,{placeholder:"Actual start date",variant:"outlined",fullWidth:!0}),e.jsx(I,{placeholder:"End date",variant:"outlined",fullWidth:!0}),e.jsx(I,{placeholder:"Actual end date",variant:"outlined",fullWidth:!0}),e.jsx(I,{placeholder:"Add sprint...",variant:"outlined",fullWidth:!0}),e.jsxs(I,{select:!0,fullWidth:!0,label:"Creator",value:d,onChange:n=>x(n.target.value),children:[e.jsx(k,{value:"Unassigned",children:"Unassigned"}),e.jsx(k,{value:d,children:d})]})]})})}),es=({issueKey:h,summary:u,issueDeatils:l,items:d,handleModalClose:g})=>{const[x,n]=s.useState(l||"To Do"),[t,r]=s.useState(""),[p,i]=s.useState([{author:"Niveditha",text:"hi",time:"18 hours ago"}]),[c,S]=s.useState(""),[v,F]=s.useState([{change:'Status set to "To Do"',time:"18 hours ago"},{change:"Description updated",time:"17 hours ago"}]),[D,T]=s.useState(!1),[L,P]=s.useState(null),[q,N]=s.useState(l||"None"),[X,$]=s.useState(""),[Z,J]=s.useState(""),[B,O]=s.useState(!1),[m,a]=s.useState(""),[b,w]=s.useState([]),[G,ee]=s.useState(l||"None"),[me,Ae]=s.useState(!1),[ve,he]=s.useState([]),Ce=s.useRef(null);console.log("issueDeatils>>",l);const ge=()=>{Ce.current.click()},je=j=>{const{files:Y}=j.target;if(Y.length>0){const K=Y[0];he(te=>[...te,K])}},re=j=>{F([...v,{change:j,time:new Date().toLocaleString()}])},oe=j=>{console.log("handleStatusChange called with:",j.target.value),n(j.target.value),re(`Status changed to "${j.target.value}"`)};s.useEffect(()=>{console.log("status??",x)},[x]);const Me=j=>{const Y=p.filter((K,te)=>te!==j);i(Y),re(`Comment deleted by ${p[j].author}`)},We=j=>{S(p[j].text),T(!0),P(j)},le=()=>{if(c.trim()){const j={day:"2-digit",month:"short",year:"numeric"},Y=new Date().toLocaleDateString("en-GB",j);if(D){const K=p.map((te,we)=>we===L?{...te,text:c,time:Y}:te);i(K),re(`Comment edited by ${p[L].author}`),T(!1),P(null)}else i([...p,{author:"Niveditha",text:c,time:Y}]),re("Comment added by Niveditha");S("")}},Pe=j=>j.length>20?`${j.substring(0,20)}...`:j,Fe=j=>{he(Y=>Y.filter((K,te)=>te!==j))},ye=j=>{const Y=URL.createObjectURL(new Blob([j])),K=document.createElement("a");K.href=Y,K.download=j.name,document.body.appendChild(K),K.click(),document.body.removeChild(K)},De=()=>{m&&(w([...b,m]),a(""),O(!1))};s.useState(!1);const Ne=()=>{Ae(!me)};return e.jsxs(fe,{container:!0,spacing:3,children:[e.jsxs(fe,{item:!0,xs:12,md:9,children:[e.jsx(f,{sx:{position:"absolute",top:16,right:16,zIndex:10},children:e.jsx(M,{icon:"ep:close-bold",style:{color:"black",cursor:"pointer"},onClick:g})}),e.jsx(jt,{sx:{height:"80vh"},children:e.jsxs(E,{gap:3,children:[e.jsx(Jt,{issueKey:h,issueDeatils:l,summary:u,onAttachFile:ge,status:x,handleStatusChange:oe,items:d,showInput:B,setShowInput:O,toggleChildIssueView:Ne}),e.jsx("input",{type:"file",ref:Ce,onChange:je,style:{display:"none"}}),e.jsx(Qt,{description:t,setDescription:r,updateHistory:re}),e.jsx(E,{spacing:2,mt:4,children:ve.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"h6",children:"Attachments"}),e.jsx(f,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(4, 1fr)"},sx:{border:"1px solid #e0e0e0",borderRadius:1,p:1,width:860},children:ve.map((j,Y)=>e.jsxs(f,{component:ft,sx:{width:200,height:160,borderRadius:.5,position:"relative",overflow:"hidden","&:hover .icon-container":{opacity:1}},children:[e.jsx(f,{sx:{display:"flex",justifyContent:"center"},children:j.type.startsWith("image/")?e.jsx(f,{component:"img",src:URL.createObjectURL(j),alt:j.name,sx:{width:200,height:100,objectFit:"cover"}}):j.type.startsWith("video/")?e.jsx(f,{component:"video",src:URL.createObjectURL(j),controls:!0,sx:{width:200,height:100}}):null}),e.jsxs(E,{p:1,children:[e.jsx(C,{variant:"caption",children:Pe(j.name)}),e.jsx(C,{variant:"caption",children:"21-09-2024"})]}),e.jsxs(f,{className:"icon-container",sx:{p:1,flexShrink:0,position:"absolute",top:1,right:1,opacity:0,transition:"opacity 0.3s",display:"flex",gap:1},children:[e.jsx(f,{onClick:()=>ye(j),children:e.jsx(M,{icon:"line-md:downloading-loop",style:{color:"white"}})}),e.jsx(f,{onClick:()=>Fe(Y),children:e.jsx(M,{icon:"icon-park-solid:delete-one",style:{color:"white"}})})]})]},Y))})]})}),B&&e.jsxs(E,{direction:"column",gap:2,alignItems:"flex-start",children:[e.jsx(I,{label:"New Child Issue",variant:"outlined",fullWidth:!0,value:m,onChange:j=>a(j.target.value),sx:{mb:1,borderRadius:1,"& .MuiOutlinedInput-root":{borderRadius:1},width:860}}),e.jsxs(E,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-end",width:"860px",children:[e.jsx(W,{variant:"contained",onClick:De,sx:{borderRadius:1,textTransform:"capitalize",height:"40px",minWidth:"40px"},children:"Create"}),e.jsx(W,{variant:"outlined",onClick:()=>{O(!1),a("")},sx:{borderRadius:1,textTransform:"capitalize",height:"40px",minWidth:"40px"},children:"Cancel"})]})]}),me&&e.jsx(qt,{setChildIssues:w,handleSaveIssue:De,childIssues:b,issueDeatils:l}),e.jsx(Xt,{comments:p,history:v,newComment:c,setNewComment:S,addComment:le,handleDeleteComment:Me,handleEditComment:We})]})})]}),e.jsx(fe,{item:!0,xs:12,md:3,children:e.jsx(Zt,{assignee:q,setAssignee:N,labels:X,setLabels:$,issueDeatils:l,handleStatusChange:oe,storyPoints:Z,setStoryPoints:J,reporter:G,setReporter:ee})})]})},ot={TODO:{label:"To Do",color:"default"},IN_PROGRESS:{label:"In Progress",color:"info"},DONE:{label:"Done",color:"success"}},it={HIGH:{label:"High",color:"error"},CRITICAL:{label:"Critical",color:"error"},MEDIUM:{label:"Medium",color:"warning"},LOW:{label:"Low",color:"info"}},ts=[{id:1,name:"Smith",avatar:""},{id:2,name:"Jone",avatar:""},{id:3,name:"Amith",avatar:""},{id:4,name:"Unassigned",avatar:""}];function vt({tasks:h,setSubTasks:u,setTasks:l,subTasks:d={},isChild:g=!1,parent:x="",task:n}){console.log("props>>>",n);const t=ae(),r=ae(),[p,i]=s.useState(""),[c,S]=s.useState({...h}),[v,F]=s.useState(null),[D,T]=s.useState({open:!1,anchorEl:null}),[L,P]=s.useState(!1),q=m=>{T({open:!0,anchorEl:m.currentTarget})},N=()=>{T({open:!1,anchorEl:null})},X=ae();console.log("tempRowEdit>>",c);const $=m=>{i(m.target.value)},Z=m=>{T({...D,open:!1}),P(!0);const{name:a,status:b,assign:w}=c[m],G=ts.filter(me=>me.id===w)[0],ee=G?G.name:null;F([{issueName:a,status:b,assignedEmployeeName:ee}])},J=()=>{P(!1)},B=async m=>{if(m.key==="Enter"){const a=Math.random().toString(36).substring(2,6),b={id:a,type:"subtask",summary:p,status:"inprogress",sprint:"",start_date:R(),end_date:R().add(1,"month"),labels:["DEVELOPMENT"],priority:"medium",assignee:1,reporter:2};u(w=>({...w,[a]:b})),l(w=>({...w,[c.id]:{...w[c.id],childern:[...w[c.id].childern,a]}})),i(""),r.onFalse()}},O=()=>{r.onFalse(),t.onFalse()};return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{sx:{"&:last-child td, &:last-child th":{borderRight:"1px dashed rgba(0, 0, 0, 0.1)"}},children:[e.jsx(_,{component:"th",scope:"row",size:"small",sx:{borderRight:"1px dashed rgba(0, 0, 0, 0.1)"},children:e.jsx(Be,{})}),e.jsx(_,{align:"left",size:"small",sx:{borderRight:"1px dashed rgba(0, 0, 0, 0.1)"},children:e.jsx(I,{fullWidth:!0,variant:"outlined",name:"summary",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"2px solid black"}},width:300},value:n.task_name})}),e.jsx(_,{align:"center",size:"small",sx:{borderRight:"1px dashed rgba(0, 0, 0, 0.1)"},children:e.jsx(xe,{color:ot[n.status].color,children:ot[n.status].label})}),e.jsx(_,{align:"center",size:"small",sx:{borderRight:"1px dashed rgba(0, 0, 0, 0.1)",minWidth:200},children:n.assignee_id?e.jsxs(E,{component:"li",gap:1,direction:"row",children:[e.jsx(ze,{sx:{width:24,height:24},alt:"sbhd",src:n.assignee_id}),e.jsx(C,{children:n.assignee_name})]}):e.jsx(xe,{children:"Un-Assigned"})}),e.jsx(_,{align:"center",size:"small",sx:{borderRight:"1px dashed rgba(0, 0, 0, 0.1)",minWidth:200,align:"center"},children:n.assignee_id?e.jsxs(E,{component:"li",gap:1,direction:"row",children:[e.jsx(ze,{sx:{width:24,height:24},alt:"sbhd",src:n.assignee_id}),e.jsx(C,{children:n.assignee_name})]}):e.jsx(xe,{children:"Un-Assigned"})}),e.jsx(_,{align:"center",size:"small",sx:{borderRight:"1px dashed rgba(0, 0, 0, 0.1)",minWidth:200},children:e.jsx(C,{variant:"overline",children:nt(n.start_date)})}),e.jsx(_,{align:"center",size:"small",sx:{borderRight:"1px dashed rgba(0, 0, 0, 0.1)",minWidth:200},children:e.jsx(C,{variant:"overline",children:nt(n.end_date)})}),e.jsx(_,{align:"center",size:"small",borderRight:"1px dashed grey",sx:{borderRight:"1px dashed rgba(0, 0, 0, 0.1)"},children:e.jsx(xe,{color:it[n.priority].color,children:it[n.priority].label})}),e.jsx(_,{align:"center",size:"small",sx:{borderRight:"1px dashed rgba(0, 0, 0, 0.1)"},children:e.jsx(ce,{color:D.open?"inherit":"default",onClick:q,children:e.jsx(M,{icon:"eva:more-vertical-fill"})})})]},n.task_id),r.value&&e.jsx(pe,{children:e.jsx(_,{colSpan:12,sx:{pl:25},children:e.jsx(zt,{onClickAway:O,children:e.jsx(I,{autoFocus:!0,placeholder:"Enter task details",variant:"outlined",fullWidth:!0,value:p,onChange:$,onKeyUp:B})})})}),e.jsx(bt,{open:L,onClose:J,children:e.jsx(f,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,minHeight:"90vh",maxHeight:"90vh",overflowY:"auto"},children:e.jsx(es,{issueDeatils:v,handleModalClose:J})})}),e.jsxs(qe,{open:D.open,onClose:N,anchorEl:D.anchorEl,arrow:"right-top",sx:{width:160},children:[e.jsxs(k,{onClick:()=>Z(),children:[e.jsx(M,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(yt,{sx:{borderStyle:"dashed"}}),e.jsxs(k,{onClick:()=>{X.onTrue(),N()},sx:{color:"error.main"},children:[e.jsx(M,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),t.value&&h.childern.map(m=>e.jsx(vt,{tasks:d[m],isChild:!0,setSubTasks:u,setTasks:l,parent:c.id},m))]})}function ss({open:h,onClose:u,setOpenEditDialog:l,items:d,sprintData:g,getSprints:x}){const n=g.find(a=>a.sprintId===d),[t,r]=s.useState(!1),{control:p,setValue:i}=Re(),[c,S]=s.useState(!1),v=ae(),[F,D]=s.useState((n==null?void 0:n.sprintName)||"Sprint"),[T,L]=s.useState((n==null?void 0:n.description)||""),[P,q]=s.useState(R(n==null?void 0:n.startDate)||null),[N,X]=s.useState(R(n==null?void 0:n.endDate)||null),[$,Z]=s.useState("Custom"),J=a=>{S(!0),q(a),i("start",a),O(a,N)},B=a=>{X(a),i("end",a),O(P,a)},O=(a,b)=>{a&&b&&R(b).isBefore(R(a))?r(!0):r(!1)},m=async()=>{const a={sprint_id:n==null?void 0:n.sprintId,name:F,description:T,start_date:P==null?void 0:P.format("YYYY-MM-DD HH:mm:ss"),end_date:N==null?void 0:N.format("YYYY-MM-DD HH:mm:ss")};try{v.onTrue();const b=await se.put(ne.sprints.update,a),{message:w,errors:G,status:ee}=b.data;ee===!0?(z.success("Sprint updated successfully!"),x()):z.error(w)}catch(b){console.error(b),z.error("Unable to process")}finally{v.onFalse()}l(!1)};return e.jsxs($e,{fullWidth:!0,maxWidth:!1,open:h,onClose:u,PaperProps:{sx:{maxWidth:550}},children:[e.jsxs(Qe,{id:"alert-dialog-title",variant:"bold",fontSize:20,children:["Edit: ",(n==null?void 0:n.sprintName)||"Sprint"]}),e.jsxs(Xe,{children:[e.jsx(C,{variant:"subtitle2",sx:{mb:3},children:"Required fields are marked with an asterisk"}),e.jsx(fe,{container:!0,spacing:2,children:e.jsxs(f,{component:"form",sx:{display:"flex",flexDirection:"column",gap:3,width:"100%",p:3,overflow:"hidden",boxSizing:"border-box"},children:[e.jsx(I,{required:!0,id:"sprint-name",label:"Sprint Name",variant:"outlined",value:F,onChange:a=>D(a.target.value)}),e.jsxs(Ve,{sx:{width:"100%"},children:[e.jsx(Ge,{id:"duration-select-label",children:"Duration"}),e.jsxs(Ke,{labelId:"duration-select-label",id:"duration-select",label:"Duration",variant:"outlined",value:$,onChange:a=>Z(a.target.value),children:[e.jsx(k,{value:"week1",children:"1 Week"}),e.jsx(k,{value:"week2",children:"2 Weeks"}),e.jsx(k,{value:"week3",children:"3 Weeks"}),e.jsx(k,{value:"week4",children:"4 Weeks"}),e.jsx(k,{value:"Custom",children:"Custom"})]})]}),e.jsx(_e,{name:"start",control:p,render:({field:a})=>e.jsx(be,{...a,value:P,onChange:J,label:"Start Date",format:"DD/MM/YY hh:mm A",slotProps:{textField:{fullWidth:!0,error:c&&!P}}})}),e.jsx(_e,{name:"end",control:p,render:({field:a})=>e.jsx(be,{...a,value:N,onChange:B,label:"End Date",format:"DD/MM/YY hh:mm A",slotProps:{textField:{fullWidth:!0,error:t,helperText:t?"End date must be later than start date":""}},disabled:$!=="Custom"})}),e.jsx(I,{name:"subDescription",label:"Other Details",multiline:!0,rows:4,value:T,onChange:a=>L(a.target.value),sx:{width:"100%"}})]})})]}),e.jsxs(Ze,{children:[e.jsx(W,{variant:"outlined",onClick:u,children:"Cancel"}),e.jsx(Se,{type:"submit",loading:v.value,variant:"contained",disabled:t,onClick:m,children:"Update"})]})]})}function ns(){const h=Dt();return{...Je(t=>t.tasks),deleteTask:async t=>{try{const r=await se.delete(ne.tasks.delete,{data:{task_id:t}}),{error_code:p}=r.data;p===0?(h(_t(t)),console.log("Task deleted successfully")):console.error("Error deleting task:",r.data.message)}catch(r){console.error("Error deleting task:",r)}},setFilters:wt,fetchTasks:async t=>{try{const r=await se.get(ne.tasks.list,{params:{stage_id:t}}),{error_code:p,data:i}=r.data;p===0?h(It(i)):console.error("Error fetching tasks:",r.data.message)}catch(r){console.error("Error fetching tasks:",r)}},createTask:async t=>{if(t.task_name)try{const r=await se.post(ne.tasks.create,{description:t.task_name,task_name:t.task_name,stage_id:t.stage_id,project_id:t.project_id,sprint_id:t.sprint_id,parent_id:null}),{error_code:p,data:i,message:c}=r.data;if(p!==0)throw new Error(c);h(Tt({tasks_id:i.task_id,task:i}))}catch(r){throw r instanceof Error&&r.message||typeof r=="object"&&(r==null?void 0:r.message)||r}},createSubTask:async t=>{if(t.task_name)try{const r=await se.post(ne.tasks.create,{description:t.task_name,stage_id:t.stage_id,project_id:t.project_id,parent_id:t.parent_id}),{error_code:p,data:i,message:c}=r.data;if(p!==0)throw new Error(c);h(Et({tasks_id:t.parent_id,subTask:i,subtask_id:i.task_id}))}catch(r){throw r instanceof Error&&r.message||typeof r=="object"&&(r==null?void 0:r.message)||r}},deleteAllTasks:async t=>{try{const r=await se.delete(ne.tasks.deleteall,{data:{task_ids:t}}),{error_code:p}=r.data;return p===0?(h(Rt(t)),console.log("Tasks deleted successfully"),!0):(console.error("Error deleting tasks:",r.data.message),!1)}catch(r){throw console.error("Error deleting tasks:",r),r}}}}function as({open:h,onClose:u,assignee:l,setAssignee:d,setIsModalOpen:g,currentSprintId:x,sprints:n,getSprints:t}){const[r,p]=s.useState(""),{createTask:i}=ns(),{currentProjectId:c}=Je(D=>D.projects),S=ae();console.log("sprints>",n),console.log("currentSprintId>",x);const v=async()=>{const D=x;try{S.onTrue(),await i({project_id:c,sprint_id:D,task_name:r}),z.success("created succesfull"),t()}catch(T){z.error(T)}finally{S.onFalse(),g(!1)}},F=()=>{g(!1),p(""),d("")};return e.jsx(bt,{open:h,onClose:u,children:e.jsxs(f,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",md:500},bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2},children:[e.jsx(C,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{mb:2},children:"Create New Task"}),e.jsxs(E,{spacing:2,children:[e.jsx(I,{label:"Task Details",placeholder:"Enter task details",helperText:"Enter a task to create",fullWidth:!0,value:r,onChange:D=>{console.log("TextField value:",D.target.value),p(D.target.value)}}),e.jsxs(I,{select:!0,onChange:D=>d(D.target.value),fullWidth:!0,helperText:"Associate task into stages",value:l,variant:"outlined",sx:{mb:3},children:[e.jsx(k,{value:"Member",children:"Default"}),e.jsx(k,{value:"Admin",children:"Implemention"}),e.jsx(k,{value:"Viewer",children:"Closer"}),e.jsx(k,{value:"Viewer",children:"Planning"})]}),e.jsxs(E,{direction:"row",spacing:2,justifyContent:"flex-end",children:[e.jsx(W,{variant:"outlined",onClick:F,children:"Cancel"}),e.jsx(Se,{variant:"contained",loading:S.value,onClick:()=>v(),children:"Save"})]})]})]})})}const rs=[{id:"task",label:"Tasks",align:"left",icon:"fluent:text-description-32-filled",hide:!1,width:500},{id:"status",label:"Status",align:"left",icon:"lets-icons:status",hide:!1,width:100},{id:"reporter_id",label:"Creator",align:"center",icon:"heroicons:at-symbol-20-solid",hide:!1,width:200},{id:"assignee_id",label:"Assignee",align:"center",icon:"heroicons:at-symbol-20-solid",hide:!1,width:200},{id:"start_date",label:"Start date",align:"center",icon:"solar:calendar-date-bold",hide:!1,width:200},{id:"end_date",label:"End date",align:"center",icon:"solar:calendar-date-bold",hide:!1,width:200},{id:"priority",label:"Priority",align:"left",icon:"iconoir:priority-down-solid",hide:!1,width:100},{id:"action",label:"Action",align:"left",icon:"iconoir:priority-down-solid",hide:!1,width:100},{width:100,hide:!1}];function Ct({order:h,orderBy:u,onRequestSort:l,rowCount:d=0,numSelected:g=0,onSelectAllRows:x}){const n=t=>r=>{l(r,t)};return e.jsx(mt,{children:e.jsxs(pe,{children:[e.jsx(_,{padding:"checkbox",children:e.jsx(Be,{color:"primary",align:"center",inputProps:{"aria-label":"select all tasks"}})}),x&&e.jsx(_,{padding:"checkbox",align:"left",children:e.jsx(Be,{indeterminate:!!g&&g<d,checked:!!d&&g===d,onChange:t=>x(t.target.checked),inputProps:{name:"select-all-rows","aria-label":"select all rows"}})}),rs.map(t=>e.jsx(_,{align:t.align,sortDirection:u===t.id?h:!1,sx:{width:t.width},children:e.jsxs(At,{active:u===t.id,direction:u===t.id?h:"asc",onClick:n(t.id),children:[e.jsxs(E,{gap:1,direction:"row",children:[t.icon&&e.jsx(M,{icon:t.icon}),e.jsx(C,{variant:"body2",children:t.label})]}),u===t.id?e.jsx(f,{component:"span",sx:Ht,children:h==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))]})})}Ct.propTypes={onRequestSort:Le.func.isRequired,order:Le.oneOf(["asc","desc"]).isRequired,orderBy:Le.string.isRequired};function os(){var we;const[h,u]=s.useState([]),[l,d]=s.useState([]),g=ae(),[x,n]=s.useState("asc"),[t,r]=s.useState("key");s.useState(!0);const p=s.useRef(null),[i,c]=s.useState(!1),[S,v]=s.useState(null),[F,D]=s.useState(""),[T,L]=s.useState(""),[P,q]=s.useState(""),[N,X]=s.useState(""),[$,Z]=s.useState(""),[J,B]=s.useState(!1),[O,m]=s.useState(null),[a,b]=s.useState(!1),[w,G]=s.useState(!1),[ee,me]=s.useState("Default"),[Ae,ve]=s.useState(!1),[he,Ce]=s.useState(null),[ge,je]=s.useState({open:!1,anchorEl:null}),re=ae(),{currentProjectId:oe}=Je(o=>o.projects);console.log("sprints>>",l),console.log("tasks>>",h),console.log("startDateTime>>",T),console.log("selectedSprint>>",he),console.log("project_id>>",oe);const Me=(o,y)=>{n(t===y&&x==="asc"?"desc":"asc"),r(y)},We=async()=>{re.onTrue();const o={sprint_name:`Sprint ${l.length+1}`,description:null,project_id:oe,start_date:null,created_by:null,created_at:R(),end_date:null,actual_start_date:R(),actual_end_date:R().add(1,"week")};try{const y=await se.post(ne.sprints.create,o);console.log("response>>",y);const{message:H,error:Q,data:ie}=y.data;if(Q===0){const de={sprintId:ie.sprint_id,sprintName:ie.sprint_name,tasks:0,open:!0};console.log("createdSprint>>",de),d([...l,de]),m(de.id),z.success("Sprint created successfully!")}else z.error(H)}catch(y){console.error(y),z.error("Unable to process")}finally{re.onFalse()}},le=s.useCallback(async()=>{ve(!0);try{const o=await se.post(ne.sprints.list,{project_id:oe},{headers:{"Content-Type":"application/json"}});console.log("listresponse>>",o.data);const{message:y,error:H,data:Q}=o.data;if(H===0){const ie=Q.map(V=>({sprintName:V.sprint_name||"Unnamed Sprint",sprintId:V.sprint_id||null,startDate:V.start_date,endDate:V.end_date,tasks:Array.isArray(V.tasks)?V.tasks:[],open:!1}));d(ie);const de=Q.reduce((V,ke)=>ke.tasks?[...V,...ke.tasks]:V,[]);u(de)}else z.error(y)}catch(o){console.error(o),z.error("Unable to process")}finally{ve(!1)}},[oe]);s.useEffect(()=>{oe!==""&&le()},[oe,le]);const Pe=o=>{v(o),G(!0),setTimeout(()=>{var y;return(y=p.current)==null?void 0:y.focus()},0)};s.useEffect(()=>{console.log("Current Sprint ID Updated:",S)},[S]);const Fe=o=>{Ce(o),d(y=>y.map(Q=>Q.sprintId===o?{...Q,open:!Q.open}:Q))};s.useEffect(()=>{const o=O?setTimeout(()=>m(null),3e3):null;return()=>{o&&clearTimeout(o)}},[O]);const ye=o=>{c(!1),b(!1),o&&d(y=>y.map(H=>H.sprintId===o.sprintId?{...H,startDateTime:o.startDateTime,endDateTime:o.endDateTime}:H)),v(null)};console.log("sprintdate",l.start_date);const De=o=>{B(!0),v(o);const y=l.find(H=>H.sprintId===o);y&&Ce(y)},Ne=()=>{B(!1),v(null)},j=o=>{b(!0),v(o)},Y=(o,y)=>{c(!0),L(null),q(null),v(o),D(y)},K=(o,y)=>{v(o),je({open:!0,anchorEl:y.currentTarget})},te=o=>{const y={day:"numeric",month:"short"};return o.toLocaleDateString("en-US",y)};return e.jsxs(Mt,{maxWidth:"xl",children:[e.jsxs(E,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:{xs:3,md:5}},children:[e.jsx(Nt,{heading:"Backlog",links:[{name:"Dashboard",href:"/dashboard"},{name:"Timeline",href:"/timeline"}]}),e.jsx(Se,{variant:"contained",loading:re.value,startIcon:e.jsx(M,{icon:"mingcute:add-line"}),onClick:We,children:"New Sprint"})]}),Ae?e.jsx(f,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(Bt,{color:"inherit"})}):e.jsxs(e.Fragment,{children:[e.jsx(E,{gap:3,children:l.length>0?l.map(o=>{var y,H,Q,ie,de,V,ke,Ie,et,Te,tt,Ee,st;return e.jsxs(ft,{ref:A=>{o.id===O&&A&&A.scrollIntoView({behavior:"smooth",block:"center"})},children:[e.jsxs(f,{sx:{display:"flex",justifyContent:"space-between",py:2},children:[e.jsxs(E,{direction:"row",gap:1,sx:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[e.jsx(ce,{onClick:()=>Fe(o.sprintId),children:e.jsx(M,{icon:o.open?"mingcute:down-line":"mingcute:right-line"})}),e.jsx(W,{variant:"outlined",size:"small",disabled:!0,style:{textTransform:"none",pointerEvents:"none",backgroundColor:"#f0f0f0",color:"#555"},children:o.sprintName}),o.startDate&&o.endDate?e.jsx(C,{variant:"caption",color:"textSecondary",ml:1,children:`${te(new Date(o.startDate))} - ${te(new Date(o.endDate))}`}):e.jsx(W,{sx:{color:"grey"},startIcon:e.jsx(M,{icon:"ic:round-edit",style:{color:"gray"}}),onClick:()=>Y(o.sprintId,o.sprintName),disabled:o.startDate&&o.endDate,children:"Add Dates"}),e.jsxs(C,{color:"textSecondary",variant:"caption",sx:{fontWeight:"normal"},children:["(",((y=o.tasks)==null?void 0:y.length)||0," Tasks)"]})]}),e.jsxs(E,{direction:"row",gap:1,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(ue,{title:`ToDo (${(((Q=(H=o.tasks)==null?void 0:H.filter)==null?void 0:Q.call(H,A=>{var U;return((U=A.status)==null?void 0:U.toUpperCase())==="TODO"}))||[]).length})`,children:e.jsx(xe,{color:"default",children:(((de=(ie=o.tasks)==null?void 0:ie.filter)==null?void 0:de.call(ie,A=>{var U;return((U=A.status)==null?void 0:U.toUpperCase())==="TODO"}))||[]).length})}),e.jsx(ue,{title:`InProgress (${(((ke=(V=o.tasks)==null?void 0:V.filter)==null?void 0:ke.call(V,A=>{var U;return((U=A.status)==null?void 0:U.toUpperCase())==="InProgress"}))||[]).length})`,children:e.jsx(xe,{color:"info",children:(((et=(Ie=o.tasks)==null?void 0:Ie.filter)==null?void 0:et.call(Ie,A=>{var U;return((U=A.status)==null?void 0:U.toUpperCase())==="INPROGRESS"}))||[]).length})}),e.jsx(ue,{title:`Done (${(((tt=(Te=o.tasks)==null?void 0:Te.filter)==null?void 0:tt.call(Te,A=>{var U;return((U=A.status)==null?void 0:U.toUpperCase())==="Done"}))||[]).length})`,children:e.jsx(xe,{color:"success",children:(((st=(Ee=o.tasks)==null?void 0:Ee.filter)==null?void 0:st.call(Ee,A=>{var U;return((U=A.status)==null?void 0:U.toUpperCase())==="DONE"}))||[]).length})}),e.jsx(W,{color:"inherit",size:"small",variant:"outlined",onClick:()=>De(o.sprintId),disabled:o.tasks.length===0,children:"Start Sprint"}),e.jsx(ce,{color:ge.open?"inherit":"default",onClick:A=>K(o.sprintId,A),children:e.jsx(M,{icon:"eva:more-vertical-fill"})})]})]}),o.open&&e.jsxs(e.Fragment,{children:[e.jsx(ut,{component:xt,children:e.jsxs(pt,{children:[e.jsx(Ct,{open:i,order:x,orderBy:t,onRequestSort:Me}),e.jsx(gt,{children:Array.isArray(o.tasks)&&o.tasks.length>0?o.tasks.map(A=>e.jsx(vt,{task:A},A.task_id)):e.jsx(pe,{children:e.jsx(_,{colSpan:14,sx:{textAlign:"center"},children:e.jsx(Wt,{filled:!0})})})})]})}),e.jsx(f,{sx:{m:2},children:e.jsx(W,{variant:"contained",onClick:()=>Pe(o.sprintId),children:"Create Task"})})]})]},o.sprintId)}):e.jsx(C,{children:"No sprints are available."})}),ge.open&&e.jsx(qe,{open:ge.open,anchorEl:ge.anchorEl,onClose:()=>je({open:!1,anchorEl:null}),children:e.jsxs(ct,{children:[e.jsxs(k,{onClick:()=>{S&&(j(S),je({open:!1,anchorEl:null}))},children:[e.jsx(M,{icon:"solar:eraser-bold"}),"Edit"]}),e.jsxs(k,{onClick:()=>{g.onTrue(),je({open:!1,anchorEl:null})},sx:{color:"error.main"},children:[e.jsx(M,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),e.jsx($t,{open:J,onClose:Ne,setBool:B,setCurrentSprintId:v,items:S,startDateTime:N,setStartDateTime:X,endDateTime:$,setEndDateTime:Z,taskCount:((we=he==null?void 0:he.tasks)==null?void 0:we.length)||0,getSprints:le,sprintData:l}),e.jsx(Vt,{open:i,onClose:ye,setOpen:c,setCurrentSprintId:v,items:F,startDateTime:T,sprintid:S,setStartDateTime:L,endDateTime:P,setEndDateTime:q,getSprints:le}),w&&e.jsx(as,{open:w,assignee:ee,setAssignee:me,setSprints:d,sprints:l,setIsModalOpen:G,setTasks:u,currentSprintId:S,getSprints:le}),a&&e.jsx(ss,{open:a,onClose:ye,setOpenEditDialog:b,items:S,sprintData:l,getSprints:le})]})]})}const lt={title:"Minimals UI: The starting point for your next project",description:"The starting point for your next project with Minimal UI Kit, built on the newest version of Material-UI ©, ready to be customized to your style"};function Ts(){return Pt(),e.jsxs(e.Fragment,{children:[e.jsxs(Ft,{children:[e.jsx("title",{children:lt.title}),e.jsx("meta",{name:"description",content:lt.description})]}),e.jsx(os,{})]})}export{Ts as default};
