import{r as a,a6 as E,a7 as A,a8 as B,j as e,f as O,a9 as q,aa as D,ab as F,k as H,B as x,Z as M,E as U,ac as V,J as h,K as y,ad as W,I as k,F as K,ae as L,af as z,P as J}from"./index-BXVaN-Bg.js";import{C as N}from"./CircularProgress-DeAomXPU.js";function X(){const[i,P]=a.useState("asc"),[o,T]=a.useState("name"),[p,m]=a.useState(0),[l,C]=a.useState(25),[v,_]=a.useState([]),[w,g]=a.useState(!1),[b,j]=a.useState(null),{project_id:c}=E();console.log("project_id>>",c);const u=[{key:"stage_name",label:"Stages",icon:"solar:user-outline",sortable:!0},{key:"total_tasks",label:"Total Tasks",icon:"bi:list-task",sortable:!0},{key:"completed_tasks",label:"Completed Tasks",icon:"hugeicons:task-done-02",sortable:!0},{key:"inprogress_tasks",label:"In-Progress Tasks",icon:"qlementine-icons:task-soon-16",sortable:!0},{key:"pending_tasks",label:e.jsxs("div",{style:{whiteSpace:"nowrap"},children:["Pending Tasks ",e.jsx("br",{}),"(To-Do tasks)"]}),icon:"qlementine-icons:task-past-16",sortable:!0},{key:"completed_overrun",label:"Completed Overrun",icon:"fluent-mdl2:recurring-task",sortable:!0},{key:"inprogress_overrun",label:"In-Progress Overrun",icon:"carbon:task-asset-view",sortable:!0},{key:"num_unique_employees",label:"Total Employees",icon:"bi:list-task",sortable:!0}];a.useEffect(()=>{c&&(g(!0),j(null),A.post(B.stages.stageEmployeeReport,{project_id:c}).then(s=>{_(s.data),g(!1)}).catch(s=>{j(s.message||"Failed to fetch data"),g(!1)}))},[c]);const S=s=>{P(o===s&&i==="asc"?"desc":"asc"),T(s)},d=[...v].sort((s,r)=>{const t=s[o],n=r[o];return typeof t=="string"?i==="asc"?t.localeCompare(n):n.localeCompare(t):i==="asc"?t-n:n-t}),R=(s,r)=>m(r),I=s=>{C(parseInt(s.target.value,10)),m(0)};return e.jsxs(O,{component:q,sx:{borderRadius:2,overflowX:"auto",margin:{xs:1,sm:2,md:4}},children:[e.jsxs(D,{children:[e.jsx(F,{sx:{display:"flex",justifyContent:"space-between",padding:{xs:1,sm:2}},children:e.jsx(H,{variant:"subtitle1",children:"Stages Report"})}),w?e.jsx(x,{display:"flex",justifyContent:"center",alignItems:"center",sx:{py:5},children:e.jsx(N,{})}):b?e.jsx(x,{sx:{py:2,px:3},children:e.jsx(M,{severity:"error",children:b})}):e.jsxs(U,{children:[e.jsx(V,{children:e.jsx(h,{children:u.map(s=>e.jsx(y,{sx:{minWidth:100,textAlign:"center"},children:s.sortable?e.jsx(W,{active:o===s.key,direction:o===s.key?i:"asc",onClick:()=>S(s.key),children:e.jsxs("span",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"6px"},children:[e.jsx(k,{icon:s.icon,width:20,sx:{color:"grey.500"}}),s.label]})}):e.jsxs("span",{children:[e.jsx(k,{icon:s.icon,width:20,sx:{color:"grey.500"}}),s.label]})},s.key))})}),e.jsx(K,{children:d.length===0?e.jsx(h,{children:e.jsx(y,{colSpan:u.length,align:"center",children:e.jsx(L,{title:"No stage data found.",sx:{py:10}})})}):d.slice(p*l,p*l+l).map((s,r)=>e.jsx(h,{sx:{height:"20px"},children:u.map(t=>e.jsx(y,{align:t.key==="stage_name"?"left":"center",sx:{minWidth:120,textAlign:t.key==="stage_name"?"left":"center",verticalAlign:"middle",padding:"4px 8px"},children:e.jsx(x,{sx:{display:"inline-block",px:1.5,py:.5,borderRadius:1,fontWeight:"bold",color:n=>s[t.key]===0?"inherit":t.key.includes("completed_overrun")||t.key.includes("inprogress_overrun")||t.key.includes("pending_tasks")?n.palette.error.main:n.palette.text.primary},children:s[t.key]})},t.key))},r))})]})]}),d.length>0&&e.jsx(z,{rowsPerPageOptions:[5,10,25],component:"div",count:d.length,rowsPerPage:l,page:p,onPageChange:R,onRowsPerPageChange:I})]})}const f={title:"Minimals UI: The starting point for your next project",description:"The starting point for your next project with Minimal UI Kit, built on the newest version of Material-UI Â©, ready to be customized to your style"};function Q(){return e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsxs("title",{children:[" ",f.title]}),e.jsx("meta",{name:"description",content:f.description})]}),e.jsx(X,{})]})}export{Q as default};
